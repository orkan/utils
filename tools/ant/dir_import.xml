<?xml version="1.0" encoding="UTF-8"?>

<project name="dirmirror" default="main" basedir=".">

	<target name="main">

		<echo>Mirroring [SourceDir] to [TargetDir]</echo>
		<echo>SourceDir: ${SourceDir}</echo>
		<echo>TargetDir: ${TargetDir}</echo>

		<delete includeEmptyDirs="true" verbose="false">
			<!--
				Delete all files and subdirectories of [TargetDir]
				without:
					- [TargetDir] itself
					- default excludes, https://ant.apache.org/manual/dirtasks.html#defaultexcludes
			-->
			<fileset dir="${TargetDir}" includes="**/*" defaultExcludes="true" />
		</delete>

		<copy toDir="${TargetDir}" preserveLastModified="true" verbose="false">
			<fileset dir="${SourceDir}" 
				excludes="cache/**, **/*.cache, **/*.bak, **/_cache/**, **/_coverage/**" 
				defaultExcludes="false"
				/>
			<fileset dir="${SourceDir}" includes="**/.gitkeep" />
		</copy>

	</target>

</project>
